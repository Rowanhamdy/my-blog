import{u as x,b as h,a as g,r as c,c as p,d as b,e as f,f as r,g as j,j as e,i as m,n as v,o as N}from"./index-BjB99Ldn.js";function w(){const n=x(),i=h(),{record:s,status:o,error:d}=g(a=>a.posts),u=c.useMemo(()=>p({title:r().required("Title is required"),content:r().required("Content is required"),published:f().required("Published status is required"),image:b().nullable()}),[]),t=j({initialValues:{title:(s==null?void 0:s.title)||"",content:(s==null?void 0:s.content)||"",published:(s==null?void 0:s.published)||!1,image:(s==null?void 0:s.image)||""},enableReinitialize:!0,validationSchema:u,onSubmit:async a=>{const l=new Date().toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});n(v({...a,id:s.id,image:a.image,date:l})).unwrap().then(()=>{i("/"),n(N())})}});return c.useEffect(()=>{s||i("/")},[s,i]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Decorative Left",className:"absolute top-10 left-50 w-32 sm:w-75 opacity-60 z-0"}),e.jsx("img",{src:m,alt:"Decorative Right",className:"absolute top-80 right-70 w-32 sm:w-80 opacity-60 z-0"})]}),e.jsxs("div",{className:"container relative mx-auto  px-4 py-8 max-w-2xl",children:[e.jsx("h2",{className:"text-xl logo-text font-bold mb-4   text-center mt-3",children:"Update Post"}),e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx("div",{className:"max-w-xl mx-autorelative bg-white-50  shadow-2xl rounded-lg",children:e.jsxs("div",{className:"border-b border-gray-900/10 pb-12",children:[e.jsxs("div",{className:"container  p-5 mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-bold item-color",children:"Upload Image"}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:a=>{const l=a.currentTarget.files[0];t.setFieldValue("image",l)},className:"mt-2"}),t.errors.image&&t.touched.image&&e.jsx("p",{className:"text-red-500 text-xs italic",children:t.errors.image}),t.values.image&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Image Preview:"}),e.jsx("img",{src:typeof t.values.image=="string"?t.values.image:t.values.image instanceof Blob?URL.createObjectURL(t.values.image):"",alt:"Preview",className:"max-w-xs rounded-md border"})]})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text",onChange:t.handleChange,value:t.values.title,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),t.touched.title&&t.errors.title&&e.jsx("p",{className:"text-red-500 text-xs italic",children:t.errors.title})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:"content",className:"block text-sm/6 font-medium text-gray-900",children:["Content"," "]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:e.jsx("input",{id:"content",name:"content",type:"text",onChange:t.handleChange,value:t.values.content,className:"block min-w-0 grow py-1.5 pr-3 pl-1 text-base text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6"})})})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:"published",className:"block text-sm/6 font-medium text-gray-900",children:["Published"," "]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"  ",children:e.jsx("input",{id:"published",name:"published",type:"checkbox",onChange:t.handleChange,checked:t.values.published,className:"block min-w-0 grow py-1.5 pr-3 pl-1 text-base text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6"})})})]})]}),e.jsxs("div",{className:"m-5 mb-0 flex items-center justify-end gap-x-6",children:[e.jsx("button",{type:"button",onClick:()=>i("/"),className:"text-sm/6 font-semibold text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})}),o==="loading"&&e.jsx("p",{children:"Loading..."}),o==="failed"&&e.jsxs("p",{children:["Error: ",d]})]})]})}export{w as default};
