import{u as g,a as h,b as p,c as b,d as j,e as f,f as o,g as N,j as e,i as c,h as v}from"./index-DqGVUVQr.js";function w(){const d=g(),{status:n,error:m}=h(t=>t.posts),r=p(),x=b({title:o().required("Title is required"),content:o().required("Content is required"),published:f().required("Published status is required"),image:j().test("fileType","Unsupported File Format",t=>t?["image/jpeg","image/png","image/jpg","image/webp"].includes(t.type):!0)}),u=async t=>{const a=new FileReader;return await new Promise((i,l)=>{a.onload=()=>i(a.result),a.onerror=l,a.readAsDataURL(t)})},s=N({initialValues:{title:"",content:"",published:!1,image:""},validationSchema:x,onSubmit:async t=>{const a=new Date().toLocaleString();let i={...t,date:a};if(t.image){const l=await u(t.image);i.image=l}d(v(i)),s.resetForm(),r("/")}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative ",children:[e.jsx("img",{src:c,alt:"Decorative Left",className:"absolute top-10 left-50 w-32 sm:w-75 opacity-60 z-0"}),e.jsx("img",{src:c,alt:"Decorative Right",className:"absolute top-100 right-50 w-32 sm:w-80 opacity-60 z-0"})]}),e.jsxs("div",{className:"container relative mx-auto  px-4 py-8 max-w-2xl",children:[e.jsx("h2",{className:"text-xl logo-text font-bold mb-4 text-center mt-3",children:"Create New Post"}),e.jsx("form",{onSubmit:s.handleSubmit,className:"z-10",children:e.jsx("div",{className:"space-y-12 border-2 border-stone-400 rounded-2xl",children:e.jsxs("div",{className:"border-b border-gray-900/10 pb-12",children:[e.jsxs("div",{className:"container  p-5 mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-900",children:"Upload Image"}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:t=>{const a=t.currentTarget.files[0];s.setFieldValue("image",a)},className:"mt-2"}),s.errors.image&&s.touched.image&&e.jsx("p",{className:"text-red-500 text-xs italic",children:s.errors.image}),s.values.image&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Image Preview:"}),e.jsx("img",{src:URL.createObjectURL(s.values.image),alt:"Preview",className:"max-w-xs rounded-md border"})]})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text",onChange:s.handleChange,value:s.values.title,className:"shadow bg-pink-50 appearance-none  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),s.touched.title&&s.errors.title&&e.jsx("p",{className:"text-red-500 text-xs italic",children:s.errors.title})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:"content",className:"block text-sm/6 font-medium text-gray-900",children:["Content"," "]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"flex items-center rounded-md bg-white   ",children:e.jsx("input",{id:"content",name:"content",type:"text",onChange:s.handleChange,value:s.values.content,className:"shadow bg-pink-50 appearance-none  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})})})]}),e.jsx("div",{className:"sm:col-span-4",children:e.jsxs("div",{className:"flex items-center space-x-3 mt-6",children:[e.jsx("input",{id:"published",name:"published",type:"checkbox",onChange:s.handleChange,checked:s.values.published,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"published",className:"block text-sm font-medium text-gray-700",children:"Publish this post"})]})})]}),e.jsxs("div",{className:"m-5 mb-0 mt-0  flex items-center justify-end gap-x-6",children:[e.jsx("button",{onClick:()=>r("/"),type:"button",className:"text-sm/6 font-semibold text-gray-900",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})}),n==="loading"&&e.jsx("p",{children:"Loading..."}),n==="failed"&&e.jsxs("p",{children:["Error: ",m]})]})]})}export{w as default};
